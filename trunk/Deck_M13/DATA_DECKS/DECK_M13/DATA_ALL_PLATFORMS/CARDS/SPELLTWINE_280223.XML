<?xml version='1.0'?>
<CARD_V2>
  <FILENAME text="SPELLTWINE_280223" />
  <CARDNAME text="SPELLTWINE" />
  <TITLE>
    <LOCALISED_TEXT LanguageCode="en-US"><![CDATA[Spelltwine]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="de-DE"><![CDATA[Spelltwine]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="es-ES"><![CDATA[Spelltwine]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="fr-FR"><![CDATA[Spelltwine]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="it-IT"><![CDATA[Spelltwine]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="jp-JA"><![CDATA[Spelltwine]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="ko-KR"><![CDATA[Spelltwine]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="ru-RU"><![CDATA[Spelltwine]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="pt-BR"><![CDATA[Spelltwine]]></LOCALISED_TEXT>
  </TITLE>
  <MULTIVERSEID value="280223" />
  <ARTID value="280223" />
  <ARTIST name="Noah Bradley" />
  <CASTING_COST cost="{5}{U}" />
  <TYPE metaname="Sorcery" />
  <EXPANSION value="DPG" />
  <RARITY metaname="R" />
  <SPELL_ABILITY dangerous="1">
    <LOCALISED_TEXT LanguageCode="en-US"><![CDATA[Exile target instant or sorcery card from your graveyard and target instant or sorcery card from an opponent’s graveyard. Copy those cards. Cast the copies if able without paying their mana costs. Exile Spelltwine.]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="de-DE"><![CDATA[Exile target instant or sorcery card from your graveyard and target instant or sorcery card from an opponent’s graveyard. Copy those cards. Cast the copies if able without paying their mana costs. Exile Spelltwine.]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="es-ES"><![CDATA[Exile target instant or sorcery card from your graveyard and target instant or sorcery card from an opponent’s graveyard. Copy those cards. Cast the copies if able without paying their mana costs. Exile Spelltwine.]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="fr-FR"><![CDATA[Exile target instant or sorcery card from your graveyard and target instant or sorcery card from an opponent’s graveyard. Copy those cards. Cast the copies if able without paying their mana costs. Exile Spelltwine.]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="it-IT"><![CDATA[Exile target instant or sorcery card from your graveyard and target instant or sorcery card from an opponent’s graveyard. Copy those cards. Cast the copies if able without paying their mana costs. Exile Spelltwine.]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="jp-JA"><![CDATA[Exile target instant or sorcery card from your graveyard and target instant or sorcery card from an opponent’s graveyard. Copy those cards. Cast the copies if able without paying their mana costs. Exile Spelltwine.]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="ko-KR"><![CDATA[Exile target instant or sorcery card from your graveyard and target instant or sorcery card from an opponent’s graveyard. Copy those cards. Cast the copies if able without paying their mana costs. Exile Spelltwine.]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="ru-RU"><![CDATA[Exile target instant or sorcery card from your graveyard and target instant or sorcery card from an opponent’s graveyard. Copy those cards. Cast the copies if able without paying their mana costs. Exile Spelltwine.]]></LOCALISED_TEXT>
    <LOCALISED_TEXT LanguageCode="pt-BR"><![CDATA[Exile target instant or sorcery card from your graveyard and target instant or sorcery card from an opponent’s graveyard. Copy those cards. Cast the copies if able without paying their mana costs. Exile Spelltwine.]]></LOCALISED_TEXT>
	<TARGET_DEFINITION id="0">
    local filter = Object():GetFilter()
    filter:Clear()
    filter:AddCardType( CARD_TYPE_INSTANT )
	filter:AddCardType( CARD_TYPE_SORCERY )
    filter:SetPlayer( EffectController() )
    filter:SetZone( ZONE_GRAVEYARD )
    </TARGET_DEFINITION>
    <TARGET_DEFINITION id="1">
    local filter = Object():GetFilter()
    filter:Clear()
    filter:AddCardType( CARD_TYPE_INSTANT )
    filter:AddCardType( CARD_TYPE_SORCERY )
    filter:SetZone( ZONE_GRAVEYARD )
    filter:SetControllersTeam( EffectController():GetTeam() )
    filter:AddExtra( FILTER_EXTRA_FLIP_TEAM )
    </TARGET_DEFINITION>
    <TARGET_DETERMINATION>
    local has_first = AtLeastOneTargetFromDefinition(0)
    local has_second = AtLeastOneTargetFromDefinition(1)
    if (has_first ~= 0 and has_second ~= 0) then
    	return 1
    else
    	return 0
    end
    </TARGET_DETERMINATION>
    <PLAY_TIME_ACTION target_choosing="1">
    EffectController():ChooseTarget( 0, "CARD_QUERY_CHOOSE_INSTANT_OR_SORCERY_TO_EXILE_COPY", EffectDC():Make_Targets(0) )
    </PLAY_TIME_ACTION>
    <PLAY_TIME_ACTION target_choosing="1">
	local player = EffectController()
    player:SetTargetCount( 1 )
    player:SetTargetPrompt( 0, "CARD_QUERY_CHOOSE_WHICH_PLAYERS_GRAVEYARD" )
    player:SetTargetPrompt( 1, "CARD_QUERY_CHOOSE_INSTANT_OR_SORCERY_TO_EXILE_COPY" )
    player:ChooseTargets( 0, EffectDC():Make_Targets(1) )
    </PLAY_TIME_ACTION>
    <RESOLUTION_TIME_ACTION ignore_filter="1">
    local spellA = EffectDC():Get_Targets(0):Get_CardPtr(0)
    local spellB = EffectDC():Get_Targets(1):Get_CardPtr(0)
	local browser = EffectDC():Make_Chest(0)
	local i = 0
    if (spellA ~= nil)
		spellA:RemoveFromGame()
		browser:Set_CardPtr(i, spellA)
		i=i+1
	end
	if (spellB ~= nil)
		spellB:RemoveFromGame()
		browser:Set_CardPtr(i, spellB)
	end
    </RESOLUTION_TIME_ACTION>
	<RESOLUTION_TIME_ACTION ignore_filter="1">
	local browser = EffectDC():Get_Chest(0)
    local player = EffectController()
    if player ~= nil then 
    	if browser ~= nil then
    		player:SetTargetCount( 2 )
    		for i=0,1 do
    			player:SetTargetPrompt( i, "CARD_QUERY_CHOOSE_SPELL_TO_COPY" )
    		end
    		player:ChooseTargetsFromDC( NO_VALIDATION, browser, EffectDC():Make_Targets(2) )
    	end
    end
	</RESOLUTION_TIME_ACTION>
	<RESOLUTION_TIME_ACTION ignore_filter="1">
    local spell_DC = EffectDC():Get_Targets(2)
    local spell = spell_DC:Get_CardPtr(0)
    local i = 0
    while spell ~= nil do
		EffectController():CopySpellAndCastIt( spell )
    	i=i+1
    	spell = spell_DC:Get_CardPtr(i)
    end
    </RESOLUTION_TIME_ACTION>
  </SPELL_ABILITY>
  <AI_BASE_SCORE score="800" zone="ZONE_HAND" />
</CARD_V2>
